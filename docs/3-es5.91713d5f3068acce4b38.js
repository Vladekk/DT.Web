(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1u0J":function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=e("mrSG"),o=e("pugT"),r=e("6blF"),i=e("T1DM"),c=e("/21U");function s(n){var l=n.subscriber,e=n.counter,t=n.period;l.next(e),this.schedule({subscriber:l,counter:e+1,period:t},t)}var b=e("VNr4"),a=e("P6uZ"),p=e("67Y/"),d=e("7wIv"),f=e.n(d),h=function(){function n(n,l,e,t){this.scheduleService=n,this.activatedRoute=l,this.spinner=e,this.logService=t,this.now=new Date,this.subscription=new o.a}return n.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},n.prototype.ngOnInit=function(){var n,l,e=this,t=(n=1e3,void 0===n&&(n=0),void 0===l&&(l=i.a),(!Object(c.a)(n)||n<0)&&(n=0),l&&"function"==typeof l.schedule||(l=i.a),new r.a(function(e){return e.add(l.schedule(s,n,{subscriber:e,counter:0,period:n})),e})).subscribe(function(){e.now=new Date});this.subscription.add(t),this.activatedRoute.paramMap.subscribe(function(n){e.spinner.show();var l=n.get("routeNumber");return e.logService.Log("Route selected is "+l+", getting schedule"),e.GetSchedule(l),l})},n.prototype.IsClosestToNow=function(n,l){var e=this,t=l.filter(function(n){return n>=e.now});return t.length>0&&t[0]==n},n.prototype.suppressUpdates=function(n){},n.prototype.MapToVm=function(n){var l=this;return n.map(function(e){return{RunTime:e,IsClosest:l.IsClosestToNow(e,n)}})},n.prototype.GetSchedule=function(n){var l=this;this.fromCenterSchedule$=this.scheduleService.GetScheduleInfo(n).pipe(Object(a.a)(),Object(p.a)(function(n){return u.f(n,1)[0]}),Object(p.a)(this.MapToVm)),this.toCenterSchedule$=this.scheduleService.GetScheduleInfo(n).pipe(Object(a.a)(),Object(p.a)(function(n){return u.f(n,2)[1]}),Object(p.a)(this.MapToVm)),Object(b.a)(this.fromCenterSchedule$,this.toCenterSchedule$).subscribe({complete:function(){return l.spinner.hide()},error:function(){return l.spinner.hide()}})},u.b([f.a],n.prototype,"IsClosestToNow",null),u.b([f.a],n.prototype,"MapToVm",null),n}(),w=function(){return function(){}}(),g=e("pMnS"),m=e("9AJC"),v=e("Ip0R"),C=e("4GxJ"),y=e("ZYCi"),O=function(){function n(n,l){this.scheduleService=n,this.activatedRoute=l,this.Routes=[],this.open=new t.m,this.close=new t.m}return n.prototype.onOpenChange=function(n){n?this.open.emit(null):this.close.emit(null)},n.prototype.ngOnInit=function(){var n=this;this.routes$=this.scheduleService.GetAllRoutes(),this.activatedRoute.paramMap.subscribe(function(l){n.RouteNumber=l.get("routeNumber")})},n}(),k=function(){function n(n,l,e){this.http=n,this.configService=l,this.logService=e,this.takeHowMuch=4,this.routeDataSupplier=this.http.post(l.ScheduleServiceUrl+"GetAllRoutes",{},{headers:{"Content-Type":"application/json"}})}return n.prototype.getProperDate=function(n){return new Date(Date.parse(n))},n.prototype.fixDates=function(n){var l=u.f(n,2),e=l[1];return[l[0].map(this.getProperDate).slice(0,this.takeHowMuch),e.map(this.getProperDate).slice(0,this.takeHowMuch)]},n.prototype.GetScheduleInfo=function(n){return this.logService.Log("Subscribing to fetch route data "+n),this.http.post(this.configService.ScheduleServiceUrl+"GetClosestRuns",{BusNumber:n},{headers:{"Content-Type":"application/json"}}).pipe(Object(p.a)(this.fixDates))},n.prototype.GetAllRoutes=function(){return this.routeDataSupplier},u.b([f.a],n.prototype,"getProperDate",null),u.b([f.a],n.prototype,"fixDates",null),n}(),S=t.qb({encapsulation:0,styles:[["button[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-size:4vh}.outerRow[_ngcontent-%COMP%]{margin-top:4vh}div[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-size:3.5vh}"]],data:{}});function M(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,4,"div",[["class","dropdown-item"],["ngbDropdownItem",""]],[[2,"disabled",null]],[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t.Eb(n,2).click()&&u),u},null,null)),t.rb(1,16384,[[4,4]],0,C.u,[t.k],null,null),(n()(),t.sb(2,0,[["routeLink",1]],null,2,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t.Eb(n,3).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u},null,null)),t.rb(3,671744,null,0,y.l,[y.k,y.a,v.j],{routerLink:[0,"routerLink"]},null),(n()(),t.Mb(4,null,[""," "]))],function(n,l){n(l,3,0,t.wb(1,"/Route/",l.context.$implicit.Number,""))},function(n,l){n(l,0,0,t.Eb(l,1).disabled),n(l,2,0,t.Eb(l,3).target,t.Eb(l,3).href),n(l,4,0,l.context.$implicit.Number)})}function E(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,4,"div",[["style","float:left;"]],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,3,null,M)),t.rb(2,278528,null,0,v.l,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),t.Gb(131072,v.b,[t.h]),t.Gb(0,v.t,[])],function(n,l){var e=l.component;n(l,2,0,t.Nb(l,2,0,t.Eb(l,4).transform(t.Nb(l,2,0,t.Eb(l,3).transform(e.routes$)),l.parent.context.index,l.parent.context.index+10)))},null)}function D(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,1,null,E)),t.rb(2,16384,null,0,v.m,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,l.context.index%10==0)},null)}function I(n){return t.Ob(2,[(n()(),t.sb(0,0,null,null,15,"div",[["class","row outerRow"]],null,null,null,null,null)),(n()(),t.sb(1,0,null,null,14,"div",[["class","col-xs-4 offset-1"]],null,null,null,null,null)),(n()(),t.sb(2,0,null,null,13,"div",[["ngbDropdown",""]],[[2,"show",null]],null,null,null,null)),t.rb(3,1720320,[["dropRoute",4]],3,C.r,[t.h,C.t,v.d,t.A,t.k,t.E,[2,C.fb]],null,null),t.Kb(603979776,1,{_menu:0}),t.Kb(603979776,2,{_menuElement:0}),t.Kb(603979776,3,{_anchor:0}),(n()(),t.sb(7,0,null,null,2,"button",[["aria-haspopup","true"],["class","btn btn-outline-primary mr-2 dropdown-toggle"],["id","dropdownManual"],["ngbDropdownAnchor",""]],[[1,"aria-expanded",0]],[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t.Eb(n,3).toggle()&&u),u},null,null)),t.rb(8,16384,[[3,4]],0,C.s,[C.r,t.k],null,null),(n()(),t.Mb(9,null,["",""])),(n()(),t.sb(10,0,[[2,0]],null,5,"div",[["aria-labelledby","dropdownManual"],["ngbDropdownMenu",""],["style","width: 40vh;"]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],[[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"],[null,"keydown.Enter"],[null,"keydown.Space"]],function(n,l,e){var u=!0;return"keydown.ArrowUp"===l&&(u=!1!==t.Eb(n,11).dropdown.onKeyDown(e)&&u),"keydown.ArrowDown"===l&&(u=!1!==t.Eb(n,11).dropdown.onKeyDown(e)&&u),"keydown.Home"===l&&(u=!1!==t.Eb(n,11).dropdown.onKeyDown(e)&&u),"keydown.End"===l&&(u=!1!==t.Eb(n,11).dropdown.onKeyDown(e)&&u),"keydown.Enter"===l&&(u=!1!==t.Eb(n,11).dropdown.onKeyDown(e)&&u),"keydown.Space"===l&&(u=!1!==t.Eb(n,11).dropdown.onKeyDown(e)&&u),u},null,null)),t.rb(11,16384,[[1,4]],1,C.v,[C.r],null,null),t.Kb(603979776,4,{menuItems:1}),(n()(),t.hb(16777216,null,null,2,null,D)),t.rb(14,278528,null,0,v.l,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),t.Gb(131072,v.b,[t.h])],function(n,l){var e=l.component;n(l,14,0,t.Nb(l,14,0,t.Eb(l,15).transform(e.routes$)))},function(n,l){var e=l.component;n(l,2,0,t.Eb(l,3).isOpen()),n(l,7,0,t.Eb(l,8).dropdown.isOpen()),n(l,9,0,e.RouteNumber),n(l,10,0,!0,t.Eb(l,11).dropdown.isOpen(),t.Eb(l,11).placement)})}var N=e("miAi"),P=e("xWc1"),x=t.qb({encapsulation:0,styles:[["ul[_ngcontent-%COMP%]{font-size:4vh;display:block;float:left;list-style-type:none;font-family:Calibri,Verdana,sans-serif;margin-top:0}li[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:4vh;color:#1a5600}.to[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{color:#8b0000}.highlight[_ngcontent-%COMP%]{color:red;font-weight:bolder}"]],data:{}});function R(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,5,"li",[],null,null,null,null,null)),t.Jb(512,null,v.C,v.D,[t.t,t.u,t.k,t.E]),t.rb(2,278528,null,0,v.k,[v.C],{ngClass:[0,"ngClass"]},null),t.Hb(3,{highlight:0}),(n()(),t.Mb(4,null,[" "," "])),t.Ib(5,2)],function(n,l){var e=n(l,3,0,l.context.$implicit.IsClosest);n(l,2,0,e)},function(n,l){var e=t.Nb(l,4,0,n(l,5,0,t.Eb(l.parent,0),l.context.$implicit.RunTime,"shortTime"));n(l,4,0,e)})}function T(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,6,"li",[],null,null,null,null,null)),t.Jb(512,null,v.C,v.D,[t.t,t.u,t.k,t.E]),t.rb(2,278528,null,0,v.k,[v.C],{ngClass:[0,"ngClass"]},null),t.Hb(3,{highlight:0}),(n()(),t.Mb(4,null,[" "," "])),t.Fb(5,1),t.Ib(6,2)],function(n,l){var e=n(l,3,0,l.context.$implicit.IsClosest);n(l,2,0,e)},function(n,l){var e=t.Nb(l,4,0,n(l,6,0,t.Eb(l.parent,0),n(l,5,0,l.context.$implicit.RunTime),"shortTime"));n(l,4,0,e)})}function j(n){return t.Ob(2,[t.Gb(0,v.e,[t.v]),(n()(),t.sb(1,0,null,null,1,"app-route-selector",[],null,[[null,"close"],[null,"open"]],function(n,l,e){var t=!0,u=n.component;return"close"===l&&(t=!1!==u.suppressUpdates(!1)&&t),"open"===l&&(t=!1!==u.suppressUpdates(!0)&&t),t},I,S)),t.rb(2,114688,null,0,O,[k,y.a],null,{open:"open",close:"close"}),(n()(),t.sb(3,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(n()(),t.sb(4,0,null,null,5,"ul",[["class","from"]],null,null,null,null,null)),(n()(),t.sb(5,0,null,null,1,"li",[],null,null,null,null,null)),(n()(),t.Mb(-1,null,["From autoosta"])),(n()(),t.hb(16777216,null,null,2,null,R)),t.rb(8,278528,null,0,v.l,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),t.Gb(131072,v.b,[t.h]),(n()(),t.sb(10,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(n()(),t.sb(11,0,null,null,5,"ul",[["class","to"]],null,null,null,null,null)),(n()(),t.sb(12,0,null,null,1,"li",[],null,null,null,null,null)),(n()(),t.Mb(-1,null,["From end station"])),(n()(),t.hb(16777216,null,null,2,null,T)),t.rb(15,278528,null,0,v.l,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),t.Gb(131072,v.b,[t.h])],function(n,l){var e=l.component;n(l,2,0),n(l,8,0,t.Nb(l,8,0,t.Eb(l,9).transform(e.fromCenterSchedule$))),n(l,15,0,t.Nb(l,15,0,t.Eb(l,16).transform(e.toCenterSchedule$)))},null)}function G(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,1,"app-schedule",[],null,null,null,j,x)),t.rb(1,245760,null,0,h,[k,y.a,N.c,P.b],null,null)],function(n,l){n(l,1,0)},null)}var F=t.ob("app-schedule",h,G,{},{},[]),K=e("gIcY"),$=e("t/Na"),_=e("AytR"),A=function(){function n(){this.ScheduleServiceUrl=_.a.ScheduleServiceUrl}return n.ngInjectableDef=t.Sb({factory:function(){return new n},token:n,providedIn:"root"}),n}();e.d(l,"ScheduleModuleNgFactory",function(){return H});var H=t.pb(w,[h],function(n){return t.Bb([t.Cb(512,t.j,t.ab,[[8,[g.a,m.a,m.b,m.f,m.g,m.c,m.d,m.e,F]],[3,t.j],t.y]),t.Cb(4608,v.o,v.n,[t.v,[2,v.H]]),t.Cb(4608,K.f,K.f,[]),t.Cb(4608,C.y,C.y,[t.j,t.r,C.nb,C.z]),t.Cb(4608,k,k,[$.c,A,P.b]),t.Cb(1073742336,v.c,v.c,[]),t.Cb(1073742336,y.m,y.m,[[2,y.r],[2,y.k]]),t.Cb(1073742336,C.w,C.w,[]),t.Cb(1073742336,C.c,C.c,[]),t.Cb(1073742336,C.f,C.f,[]),t.Cb(1073742336,C.g,C.g,[]),t.Cb(1073742336,C.k,C.k,[]),t.Cb(1073742336,C.l,C.l,[]),t.Cb(1073742336,K.e,K.e,[]),t.Cb(1073742336,K.a,K.a,[]),t.Cb(1073742336,C.q,C.q,[]),t.Cb(1073742336,C.A,C.A,[]),t.Cb(1073742336,C.E,C.E,[]),t.Cb(1073742336,C.H,C.H,[]),t.Cb(1073742336,C.K,C.K,[]),t.Cb(1073742336,C.N,C.N,[]),t.Cb(1073742336,C.Q,C.Q,[]),t.Cb(1073742336,C.V,C.V,[]),t.Cb(1073742336,C.Y,C.Y,[]),t.Cb(1073742336,C.Z,C.Z,[]),t.Cb(1073742336,C.ab,C.ab,[]),t.Cb(1073742336,C.B,C.B,[]),t.Cb(1073742336,w,w,[]),t.Cb(1024,y.i,function(){return[[{path:":routeNumber",component:h}]]},[])])})},"7wIv":function(n,l,e){"use strict";var t;function u(n,l,e){if(!e||typeof e.value!==t.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+l+"> is not a method!");return{configurable:t.boolTrue,get:function(){var n=e.value.bind(this);return Object.defineProperty(this,l,{value:n,configurable:t.boolTrue,writable:t.boolTrue}),n}}}Object.defineProperty(l,"__esModule",{value:!0}),function(n){n.typeOfFunction="function",n.boolTrue=!0}(t||(t={})),l.bind=u,l.default=u}}]);