(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1u0J":function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("mrSG"),o=t("pugT"),r=t("6blF"),i=t("T1DM"),c=t("/21U");function s(n){var l=n.subscriber,t=n.counter,e=n.period;l.next(t),this.schedule({subscriber:l,counter:t+1,period:e},e)}var b=t("VNr4"),a=t("P6uZ"),p=t("67Y/"),f=t("7wIv"),d=t.n(f),h=function(){function n(n,l,t,e){this.scheduleService=n,this.activatedRoute=l,this.spinner=t,this.logService=e,this.now=new Date,this.subscription=new o.a}return n.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},n.prototype.ngOnInit=function(){var n,l,t=this,e=(n=1e3,void 0===n&&(n=0),void 0===l&&(l=i.a),(!Object(c.a)(n)||n<0)&&(n=0),l&&"function"==typeof l.schedule||(l=i.a),new r.a(function(t){return t.add(l.schedule(s,n,{subscriber:t,counter:0,period:n})),t})).subscribe(function(){t.now=new Date});this.subscription.add(e),this.activatedRoute.paramMap.subscribe(function(n){t.spinner.show();var l=n.get("routeNumber");return t.logService.Log("Route selected is "+l+", getting schedule"),t.GetSchedule(l),l})},n.prototype.IsClosestToNow=function(n,l){var t=this,e=l.filter(function(n){return n>=t.now});return e.length>0&&e[0]==n},n.prototype.suppressUpdates=function(n){},n.prototype.MapToVm=function(n){var l=this;return n.map(function(t){return{RunTime:t,IsClosest:l.IsClosestToNow(t,n)}})},n.prototype.GetSchedule=function(n){var l=this;this.fromCenterSchedule$=this.scheduleService.GetScheduleInfo(n).pipe(Object(a.a)(),Object(p.a)(function(n){return u.f(n,1)[0]}),Object(p.a)(this.MapToVm)),this.toCenterSchedule$=this.scheduleService.GetScheduleInfo(n).pipe(Object(a.a)(),Object(p.a)(function(n){return u.f(n,2)[1]}),Object(p.a)(this.MapToVm)),Object(b.a)(this.fromCenterSchedule$,this.toCenterSchedule$).subscribe({complete:function(){return l.spinner.hide()},error:function(){return l.spinner.hide()}})},u.b([d.a],n.prototype,"IsClosestToNow",null),u.b([d.a],n.prototype,"MapToVm",null),n}(),w=function(){return function(){}}(),g=t("pMnS"),m=t("9AJC"),v=t("Ip0R"),C=t("4GxJ"),y=t("ZYCi"),O=function(){function n(n,l){this.scheduleService=n,this.activatedRoute=l,this.Routes=[],this.open=new e.m,this.close=new e.m}return n.prototype.onOpenChange=function(n){n?this.open.emit(null):this.close.emit(null)},n.prototype.ngOnInit=function(){var n=this;this.routes$=this.scheduleService.GetAllRoutes(),this.activatedRoute.paramMap.subscribe(function(l){n.RouteNumber=l.get("routeNumber")})},n}(),k=function(){function n(){}return n.DateToUtcAndBack=function(n,l){return new Date(n.getTime()+60*n.getTimezoneOffset()*1e3*(l===M.ToUtc?1:-1))},n.GetRigaTzOffsetInMs=function(){return 108e5},n}(),M=function(n){return n[n.ToUtc=-1]="ToUtc",n[n.FromUtc=1]="FromUtc",n}({}),S=function(){function n(n,l,t){this.http=n,this.configService=l,this.logService=t,this.takeHowMuch=4,this.routeDataSupplier=this.http.post(l.ScheduleServiceUrl+"GetAllRoutes",{},{headers:{"Content-Type":"application/json"}})}return n.prototype.getProperDate=function(n){var l=new Date(Date.parse(n));return new Date(l.getTime()-k.GetRigaTzOffsetInMs())},n.prototype.fixDates=function(n){var l=u.f(n,2),t=l[1];return[l[0].map(this.getProperDate).slice(0,this.takeHowMuch),t.map(this.getProperDate).slice(0,this.takeHowMuch)]},n.prototype.GetScheduleInfo=function(n){return this.logService.Log("Subscribing to fetch route data "+n),this.http.post(this.configService.ScheduleServiceUrl+"GetClosestRuns",{BusNumber:n},{headers:{"Content-Type":"application/json"}}).pipe(Object(p.a)(this.fixDates))},n.prototype.GetAllRoutes=function(){return this.routeDataSupplier},u.b([d.a],n.prototype,"getProperDate",null),u.b([d.a],n.prototype,"fixDates",null),n}(),E=e.qb({encapsulation:0,styles:[["button[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-size:4vh}.outerRow[_ngcontent-%COMP%]{margin-top:4vh}div[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-size:3.5vh}"]],data:{}});function D(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"div",[["class","dropdown-item"],["ngbDropdownItem",""]],[[2,"disabled",null]],[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e.Eb(n,2).click()&&u),u},null,null)),e.rb(1,16384,[[4,4]],0,C.u,[e.k],null,null),(n()(),e.sb(2,0,[["routeLink",1]],null,2,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e.Eb(n,3).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&u),u},null,null)),e.rb(3,671744,null,0,y.l,[y.k,y.a,v.j],{routerLink:[0,"routerLink"]},null),(n()(),e.Mb(4,null,[""," "]))],function(n,l){n(l,3,0,e.wb(1,"/Route/",l.context.$implicit.Number,""))},function(n,l){n(l,0,0,e.Eb(l,1).disabled),n(l,2,0,e.Eb(l,3).target,e.Eb(l,3).href),n(l,4,0,l.context.$implicit.Number)})}function T(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"div",[["style","float:left;"]],null,null,null,null,null)),(n()(),e.hb(16777216,null,null,3,null,D)),e.rb(2,278528,null,0,v.l,[e.P,e.M,e.t],{ngForOf:[0,"ngForOf"]},null),e.Gb(131072,v.b,[e.h]),e.Gb(0,v.t,[])],function(n,l){var t=l.component;n(l,2,0,e.Nb(l,2,0,e.Eb(l,4).transform(e.Nb(l,2,0,e.Eb(l,3).transform(t.routes$)),l.parent.context.index,l.parent.context.index+10)))},null)}function I(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),e.hb(16777216,null,null,1,null,T)),e.rb(2,16384,null,0,v.m,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,l.context.index%10==0)},null)}function N(n){return e.Ob(2,[(n()(),e.sb(0,0,null,null,15,"div",[["class","row outerRow"]],null,null,null,null,null)),(n()(),e.sb(1,0,null,null,14,"div",[["class","col-xs-4 offset-1"]],null,null,null,null,null)),(n()(),e.sb(2,0,null,null,13,"div",[["ngbDropdown",""]],[[2,"show",null]],null,null,null,null)),e.rb(3,1720320,[["dropRoute",4]],3,C.r,[e.h,C.t,v.d,e.A,e.k,e.E,[2,C.fb]],null,null),e.Kb(603979776,1,{_menu:0}),e.Kb(603979776,2,{_menuElement:0}),e.Kb(603979776,3,{_anchor:0}),(n()(),e.sb(7,0,null,null,2,"button",[["aria-haspopup","true"],["class","btn btn-outline-primary mr-2 dropdown-toggle"],["id","dropdownManual"],["ngbDropdownAnchor",""]],[[1,"aria-expanded",0]],[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e.Eb(n,3).toggle()&&u),u},null,null)),e.rb(8,16384,[[3,4]],0,C.s,[C.r,e.k],null,null),(n()(),e.Mb(9,null,["",""])),(n()(),e.sb(10,0,[[2,0]],null,5,"div",[["aria-labelledby","dropdownManual"],["ngbDropdownMenu",""],["style","width: 40vh;"]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],[[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"],[null,"keydown.Enter"],[null,"keydown.Space"]],function(n,l,t){var u=!0;return"keydown.ArrowUp"===l&&(u=!1!==e.Eb(n,11).dropdown.onKeyDown(t)&&u),"keydown.ArrowDown"===l&&(u=!1!==e.Eb(n,11).dropdown.onKeyDown(t)&&u),"keydown.Home"===l&&(u=!1!==e.Eb(n,11).dropdown.onKeyDown(t)&&u),"keydown.End"===l&&(u=!1!==e.Eb(n,11).dropdown.onKeyDown(t)&&u),"keydown.Enter"===l&&(u=!1!==e.Eb(n,11).dropdown.onKeyDown(t)&&u),"keydown.Space"===l&&(u=!1!==e.Eb(n,11).dropdown.onKeyDown(t)&&u),u},null,null)),e.rb(11,16384,[[1,4]],1,C.v,[C.r],null,null),e.Kb(603979776,4,{menuItems:1}),(n()(),e.hb(16777216,null,null,2,null,I)),e.rb(14,278528,null,0,v.l,[e.P,e.M,e.t],{ngForOf:[0,"ngForOf"]},null),e.Gb(131072,v.b,[e.h])],function(n,l){var t=l.component;n(l,14,0,e.Nb(l,14,0,e.Eb(l,15).transform(t.routes$)))},function(n,l){var t=l.component;n(l,2,0,e.Eb(l,3).isOpen()),n(l,7,0,e.Eb(l,8).dropdown.isOpen()),n(l,9,0,t.RouteNumber),n(l,10,0,!0,e.Eb(l,11).dropdown.isOpen(),e.Eb(l,11).placement)})}var R=t("miAi"),P=t("xWc1"),x=e.qb({encapsulation:0,styles:[["ul[_ngcontent-%COMP%]{font-size:4vh;display:block;float:left;list-style-type:none;font-family:Calibri,Verdana,sans-serif;margin-top:0}li[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:4vh;color:#1a5600}.to[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{color:#8b0000}.highlight[_ngcontent-%COMP%]{color:red;font-weight:bolder}"]],data:{}});function G(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,5,"li",[],null,null,null,null,null)),e.Jb(512,null,v.C,v.D,[e.t,e.u,e.k,e.E]),e.rb(2,278528,null,0,v.k,[v.C],{ngClass:[0,"ngClass"]},null),e.Hb(3,{highlight:0}),(n()(),e.Mb(4,null,[" "," "])),e.Ib(5,2)],function(n,l){var t=n(l,3,0,l.context.$implicit.IsClosest);n(l,2,0,t)},function(n,l){var t=e.Nb(l,4,0,n(l,5,0,e.Eb(l.parent,0),l.context.$implicit.RunTime,"shortTime"));n(l,4,0,t)})}function j(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,6,"li",[],null,null,null,null,null)),e.Jb(512,null,v.C,v.D,[e.t,e.u,e.k,e.E]),e.rb(2,278528,null,0,v.k,[v.C],{ngClass:[0,"ngClass"]},null),e.Hb(3,{highlight:0}),(n()(),e.Mb(4,null,[" "," "])),e.Fb(5,1),e.Ib(6,2)],function(n,l){var t=n(l,3,0,l.context.$implicit.IsClosest);n(l,2,0,t)},function(n,l){var t=e.Nb(l,4,0,n(l,6,0,e.Eb(l.parent,0),n(l,5,0,l.context.$implicit.RunTime),"shortTime"));n(l,4,0,t)})}function F(n){return e.Ob(2,[e.Gb(0,v.e,[e.v]),(n()(),e.sb(1,0,null,null,1,"app-route-selector",[],null,[[null,"close"],[null,"open"]],function(n,l,t){var e=!0,u=n.component;return"close"===l&&(e=!1!==u.suppressUpdates(!1)&&e),"open"===l&&(e=!1!==u.suppressUpdates(!0)&&e),e},N,E)),e.rb(2,114688,null,0,O,[S,y.a],null,{open:"open",close:"close"}),(n()(),e.sb(3,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(n()(),e.sb(4,0,null,null,5,"ul",[["class","from"]],null,null,null,null,null)),(n()(),e.sb(5,0,null,null,1,"li",[],null,null,null,null,null)),(n()(),e.Mb(-1,null,["From autoosta"])),(n()(),e.hb(16777216,null,null,2,null,G)),e.rb(8,278528,null,0,v.l,[e.P,e.M,e.t],{ngForOf:[0,"ngForOf"]},null),e.Gb(131072,v.b,[e.h]),(n()(),e.sb(10,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(n()(),e.sb(11,0,null,null,5,"ul",[["class","to"]],null,null,null,null,null)),(n()(),e.sb(12,0,null,null,1,"li",[],null,null,null,null,null)),(n()(),e.Mb(-1,null,["From end station"])),(n()(),e.hb(16777216,null,null,2,null,j)),e.rb(15,278528,null,0,v.l,[e.P,e.M,e.t],{ngForOf:[0,"ngForOf"]},null),e.Gb(131072,v.b,[e.h])],function(n,l){var t=l.component;n(l,2,0),n(l,8,0,e.Nb(l,8,0,e.Eb(l,9).transform(t.fromCenterSchedule$))),n(l,15,0,e.Nb(l,15,0,e.Eb(l,16).transform(t.toCenterSchedule$)))},null)}function U(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,1,"app-schedule",[],null,null,null,F,x)),e.rb(1,245760,null,0,h,[S,y.a,R.c,P.b],null,null)],function(n,l){n(l,1,0)},null)}var A=e.ob("app-schedule",h,U,{},{},[]),K=t("gIcY"),$=t("t/Na"),_=t("AytR"),H=function(){function n(){this.ScheduleServiceUrl=_.a.ScheduleServiceUrl}return n.ngInjectableDef=e.Sb({factory:function(){return new n},token:n,providedIn:"root"}),n}();t.d(l,"ScheduleModuleNgFactory",function(){return z});var z=e.pb(w,[h],function(n){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[g.a,m.a,m.b,m.f,m.g,m.c,m.d,m.e,A]],[3,e.j],e.y]),e.Cb(4608,v.o,v.n,[e.v,[2,v.H]]),e.Cb(4608,K.f,K.f,[]),e.Cb(4608,C.y,C.y,[e.j,e.r,C.nb,C.z]),e.Cb(4608,S,S,[$.c,H,P.b]),e.Cb(1073742336,v.c,v.c,[]),e.Cb(1073742336,y.m,y.m,[[2,y.r],[2,y.k]]),e.Cb(1073742336,C.w,C.w,[]),e.Cb(1073742336,C.c,C.c,[]),e.Cb(1073742336,C.f,C.f,[]),e.Cb(1073742336,C.g,C.g,[]),e.Cb(1073742336,C.k,C.k,[]),e.Cb(1073742336,C.l,C.l,[]),e.Cb(1073742336,K.e,K.e,[]),e.Cb(1073742336,K.a,K.a,[]),e.Cb(1073742336,C.q,C.q,[]),e.Cb(1073742336,C.A,C.A,[]),e.Cb(1073742336,C.E,C.E,[]),e.Cb(1073742336,C.H,C.H,[]),e.Cb(1073742336,C.K,C.K,[]),e.Cb(1073742336,C.N,C.N,[]),e.Cb(1073742336,C.Q,C.Q,[]),e.Cb(1073742336,C.V,C.V,[]),e.Cb(1073742336,C.Y,C.Y,[]),e.Cb(1073742336,C.Z,C.Z,[]),e.Cb(1073742336,C.ab,C.ab,[]),e.Cb(1073742336,C.B,C.B,[]),e.Cb(1073742336,w,w,[]),e.Cb(1024,y.i,function(){return[[{path:":routeNumber",component:h}]]},[])])})},"7wIv":function(n,l,t){"use strict";var e;function u(n,l,t){if(!t||typeof t.value!==e.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+l+"> is not a method!");return{configurable:e.boolTrue,get:function(){var n=t.value.bind(this);return Object.defineProperty(this,l,{value:n,configurable:e.boolTrue,writable:e.boolTrue}),n}}}Object.defineProperty(l,"__esModule",{value:!0}),function(n){n.typeOfFunction="function",n.boolTrue=!0}(e||(e={})),l.bind=u,l.default=u}}]);